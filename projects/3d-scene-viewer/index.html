<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.5.0 (https://qwtel.com/hydejack/)
-->









<head>
  
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">




  <title>3D Scene Viewer &middot; Sridhar</title>



<meta name="description" content="3D Scene viewer with support for multiple lights, objects, transformations and limited interactions
">




<link rel="canonical" href="http://localhost:4000/projects/3d-scene-viewer/">

<link rel="alternate" type="application/atom+xml" title="Sridhar Feed" href="http://localhost:4000/feed.xml">


  <link rel="prev" href="http://localhost:4000/projects/3d-scalar-fields/">



  <link rel="next" href="http://localhost:4000/projects/a-2-d-transfer-function-editor/">


<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<!-- Place favicon.ico in the root directory -->


<!--[if gt IE 8]><!---->


<script>
  WebFontConfig = {
    
    google: {
      families: 'Roboto+Slab:700|Noto+Sans:400,400i,700,700i'.split('|')
    },
    

    custom: {
      families: ['icomoon'],
      urls: ['/assets/icomoon/style.css']
    }
  };
</script>
<script async src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
<!--<![endif]-->

<script>
  !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document);

  !function(e){"use strict";var n=function(n,t,o){function i(e){if(a.body)return e();setTimeout(function(){i(e)})}function r(){l.addEventListener&&l.removeEventListener("load",r),l.media=o||"all"}var d,a=e.document,l=a.createElement("link");if(t)d=t;else{var f=(a.body||a.getElementsByTagName("head")[0]).childNodes;d=f[f.length-1]}var s=a.styleSheets;l.rel="stylesheet",l.href=n,l.media="only x",i(function(){d.parentNode.insertBefore(l,t?d:d.nextSibling)});var u=function(e){for(var n=l.href,t=s.length;t--;)if(s[t].href===n)return e();setTimeout(function(){u(e)})};return l.addEventListener&&l.addEventListener("load",r),l.onloadcssdefined=u,u(r),l};"undefined"!=typeof exports?exports.loadCSS=n:e.loadCSS=n}("undefined"!=typeof global?global:this);

  !function(t){if(t.loadCSS){var e=loadCSS.relpreload={};if(e.support=function(){try{return t.document.createElement("link").relList.supports("preload")}catch(t){return!1}},e.poly=function(){for(var e=t.document.getElementsByTagName("link"),r=0;r<e.length;r++){var n=e[r];"preload"===n.rel&&"style"===n.getAttribute("as")&&(t.loadCSS(n.href,n,n.getAttribute("media")),n.rel=null)}},!e.support()){e.poly();var r=t.setInterval(e.poly,300);t.addEventListener&&t.addEventListener("load",function(){e.poly(),t.clearInterval(r)}),t.attachEvent&&t.attachEvent("onload",function(){t.clearInterval(r)})}}}(this);

  window.disablePushState = false;
  window.disableDrawer = false;
</script>

<!--[if lt IE 9]>
<script src="https://unpkg.com/html5shiv/dist/html5shiv.min.js"></script>
<![endif]-->


<!--[if gt IE 8]><!---->
<style>
  
  article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-size:16px;line-height:1.75}body{color:#333;background-color:#fff;overflow-y:scroll}a{text-decoration:none}.lead{margin-left:-1rem;margin-right:-1rem}img,.img{display:block;max-width:100%;margin-bottom:1rem;border:none}img.lead,.img.lead{max-width:calc(100% + 2rem);width:calc(100% + 2rem)}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.heading{font-weight:bold;text-rendering:optimizeLegibility}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{margin:3rem 0 1rem;line-height:1.6}h1,.h1{font-size:2rem;line-height:1.25}h2,.h2{font-size:1.5rem}h3,.h3{font-size:1.17em}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.25rem;font-weight:300;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee}.hr{padding-bottom:.5rem;border-bottom:1px solid #eee;margin-bottom:1.5rem}h4,h5,h6,.h4,.h5,.h6{margin-bottom:0.5rem;font-size:1rem}table{margin-bottom:1rem;width:100%;width:calc(100% + 2rem);margin-left:-1rem;border:1px solid #e5e5e5;border-collapse:collapse;border-spacing:0}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}td:first-child,th:first-child{padding-left:1rem}td:last-child,th:last-child{padding-right:1rem}thead+tbody,tbody+tbody,tfoot{border-top:3px double #e5e5e5}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}footer{margin-bottom:2rem}.page,.post{margin-bottom:3em}.page li+li,.post li+li{margin-top:.25rem}.page>header,.post>header{margin-bottom:2rem}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-0.5rem;margin-bottom:1rem;color:#9a9a9a}.related-posts{padding-left:0;list-style:none}.related-posts>li,.related-posts>li+li{margin-top:1rem}.related-posts>li>small,.related-posts>li+li>small{font-size:75%;color:#9a9a9a}.message{margin-bottom:1rem;padding:1rem;color:#787878;background-color:#f9f9f9;margin-left:-1rem;margin-right:-1rem}body,main{position:relative;overflow-x:hidden}@media screen{body::before{content:'';width:.5rem;background:#e5e5e5;position:absolute;left:0;top:0;bottom:0}}@media screen and (min-width: 40em){html{font-size:17px}}@media screen and (min-width: 54em){html{font-size:16px}}@media screen and (min-width: 72em){html{font-size:17px}}@media screen and (min-width: 125em){html{font-size:18px}}.sr-only{display:none}.clearfix,.sidebar-social::after,.clearafter::after{content:"";display:table;clear:both}a,.a{position:relative;padding-bottom:.15rem;border-bottom:1px solid}.img{overflow:hidden;background-color:#f9f9f9}.img>img{margin:0;width:100%;height:100%}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}h1+hr,h2+hr,h3+hr,h4+hr,h5+hr,h6+hr{margin-top:0}.fade-in{animation-duration:500ms;animation-name:fade-in;animation-fill-mode:forwards}@keyframes fade-in{from{transform:translateY(-2rem);opacity:0}50%{transform:translateY(-2rem);opacity:0}to{transform:translateY(0);opacity:1}}.mb6{margin-bottom:6rem}.sidebar{color:rgba(255,255,255,0.75);text-align:left}.sidebar::before{content:"";position:absolute;z-index:2;top:0;left:0;bottom:0;right:0;background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2)}#_yDrawer{position:relative;padding:1rem 0}@media screen{#_yDrawer{padding:2rem 1rem;min-height:640px;min-height:100vh}}@media screen and (min-width: 54em){#_yDrawer{position:fixed;top:0;left:0;bottom:0;width:18rem;margin-left:0}}@media screen and (min-width: 97.5em){#_yDrawer{width:calc(50% - 28rem)}}@media screen{#_yDrawer.loaded{min-height:0;padding:0}}.sidebar-bg{position:absolute;top:0;right:0;bottom:0;left:0;background:#202020 center / cover}.sidebar-sticky{position:relative;z-index:3}@media screen{.sidebar-sticky{position:absolute;right:2rem;bottom:1rem;left:auto;max-width:14rem}}@media print{.sidebar-sticky{padding:0 2rem}}.sidebar-about>h1{color:#fff;font-size:2rem}.sidebar-nav>ul{list-style:none;padding-left:0;margin-bottom:.5rem}a.sidebar-nav-item{font-weight:bold;display:block;line-height:1.75;padding:.25rem 0;border-bottom:1px solid rgba(255,255,255,0.2)}@media screen{.y-drawer-scrim{z-index:2}.y-drawer-content{width:18rem;left:-17.5rem;z-index:3}}@media screen and (min-width: 97.5em){.y-drawer-content{width:calc(50% - 28rem)}}.sidebar-social{margin-bottom:.5rem}.sidebar-social>ul{list-style:none;padding-left:0;margin:0 -.25rem}.sidebar-social>ul>li{float:left;margin:0 .25rem}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.6rem;line-height:3rem;width:3.1249rem;height:4rem;padding:.5rem 0}.sidebar-social>ul li+li{margin-top:0}.fixed-top{position:fixed;top:0;left:0;width:100%;z-index:1}.navbar>.content{padding-top:0;padding-bottom:0;min-height:0;height:0}.menu{display:inline-block;padding:1.75rem 1.5rem;border-bottom:none;margin-left:-1.5rem;color:#9a9a9a !important}.menu::after{content:"\2630"}@media screen and (min-width: 54em){.menu{padding:1.25rem 1.5rem;position:absolute;left:-9999px}.menu:focus{position:static}}.animation-main{pointer-events:none}.loading{display:none}@media print{.menu{display:none}}.animation-main{opacity:0;will-change:opacity}.loading{position:absolute;top:0;right:0;padding:5.25rem 4.5rem;transform-origin:top right;transform:scale(0.33)}.content{position:relative;margin-left:auto;margin-right:auto;padding:5rem 1rem 12rem}@media screen{.content{max-width:38rem;padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 54em){.content{max-width:42rem;padding:4rem 1rem 12rem;margin-left:22rem;margin-right:4rem}}@media screen and (min-width: 72em){.content{margin-left:22rem;margin-right:4rem}}@media screen and (min-width: 92em){.content{max-width:48rem}}@media screen and (min-width: 97.5em){.content{margin:auto}}.me{float:right;width:6.5rem;height:6.5rem;margin-left:1rem;margin-bottom:.5rem;border-radius:100%;position:relative}@media screen and (min-width: 40em){.me{width:7rem;height:7rem}}@media screen and (min-width: 54em){.me{width:6.5rem;height:6.5rem}}@media screen and (min-width: 60em){.me{width:7rem;height:7rem}}main>footer{position:absolute;bottom:0;left:0;right:0;padding:0 1rem;color:#9a9a9a;font-size:smaller;text-align:center}main>footer>p{margin-bottom:0}html{font-family:Helvetica, Arial, sans-serif}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.heading{font-family:Helvetica, Arial, sans-serif}

</style>


<link rel="preload" href="/assets/css/hydejack.css?v=6.5.0" as="style" onload="this.rel='stylesheet'">

<style id="_pageStyle">

.content a{color:#4f86aa;border-color:rgba(79,134,170,0.2)}.content a:hover{border-color:#4f86aa}:focus{outline-color:#4f86aa}::selection{color:#fff;background:#4f86aa}::-moz-selection{color:#fff;background:#4f86aa}

</style>


<noscript>
  <link rel="stylesheet" href="/assets/css/hydejack.css?v=6.5.0">

  
  
  

  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Sans:400,400i,700,700i">
    <style>
      html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif }
      h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif }
    </style>
  

  
  <link rel="stylesheet" href="/assets/icomoon/style.css">
</noscript>
<!--<![endif]-->

</head>

<body>
  
<div class="navbar fixed-top">
  <div class="content">
    <span class="sr-only">Jump to:</span>
    <a id="_menu" class="menu no-hover" href="#_title">
      <span class="sr-only">Menu</span>
    </a>
  </div>
</div>


<div id="_yPushState">
  <div class="fade-in">
    <main id="_main" class="content" role="main" data-color="#4f86aa" data-image="/assets/img/rain.jpg">
      <!--[if gt IE 8]><!---->
<style>.grid{margin-left:-1rem;display:flex;flex-wrap:wrap}.grid::after{content:"";display:table;clear:both}.col{float:left;padding-left:1rem;margin-bottom:1rem;width:100%;display:flex}@media screen and (min-width: 40em){.col-1-2{width:50%}}@media screen and (min-width: 54em){.col-1-2{width:100%}}@media screen and (min-width: 60em){.col-1-2{width:50%}}@media print{.grid{display:block}.col{display:block;width:50%}}.card{width:100%;background:#fff;border:1px solid #eee;text-align:center;padding-bottom:0.75rem;margin-bottom:1rem;contain:content;overflow:hidden;border-radius:.25rem;page-break-inside:avoid}.card>a>.img{margin-bottom:0;border-bottom:1px solid #eee;border-top:1px solid #eee;position:relative;top:-1px}.card>.name,.card>.caption{padding:0 1rem}.card>.name{display:block;text-align:center;font-size:1rem;margin-top:0.75rem;margin-bottom:0.25rem;color:inherit}.card>.caption{margin:0.25rem 0;font-size:smaller;color:#787878}.card>.caption>p{margin-bottom:0}
</style>
<!--<![endif]-->



<article class="page" role="article">
  <header>
    <h1 class="page-title">3D Scene Viewer</h1>

    <p class="post-date heading">
      
      
        <a href="/projects/" data-flip="title">Projects</a>
        |
      
      <time datetime="2017-05-31T00:00:00-07:00">2017</time>
      <span style="float:right">
        <span class="sr-only">Links:</span>
        
          <a href="https://github.com/srmocher/3D-Viewer">Source</a>
          
        
      </span>
    </p>

    <div class="img lead sixteen-nine">
      
        
  

  

  <img
    src="https://res.cloudinary.com/dqagjb1nc/image/upload/v1497603703/Capture_plsuz9.png"
    
    alt="Screenshot"
    srcset="https://res.cloudinary.com/dqagjb1nc/image/upload/v1497603703/Capture_plsuz9.png 1920w,https://res.cloudinary.com/dqagjb1nc/image/upload/v1497603703/Capture_plsuz9.png 960w,https://res.cloudinary.com/dqagjb1nc/image/upload/v1497603703/Capture_plsuz9.png 480w"
    sizes="(min-width: 92em) 48rem, (min-width: 54em) 42rem, (min-width: 40em) 37.5rem, 100vw"
  />


      
    </div>

    
  
  
<p class="message">3D Scene viewer with support for multiple lights, objects, transformations and limited interactions</p>




  </header>

  <p>Changing topics, I will now discuss building a 3-D Scene Viewer i.e a tool to view a scene of 3D objects with features like support for multiple lights (point/directional/spot) using Blinn-Phong/Toon model, texture mapping (diffuse texture maps) and camera controls. All of this is established using <a href="https://www.opengl.org/">OpenGL (rendering)</a>, <a href="http://www.glfw.org/">GLFW (windowing system, wrapper around OpenGL)</a>, <a href="http://glm.g-truc.net/0.9.8/index.html">GLM (Coordinate transformations)</a>, <a href="https://github.com/skaslev/gl3w">gl3w (GL Core Profile support)</a> and <a href="http://www.lonesock.net/soil.html">SOIL (for loading textures)</a>.</p>

<p>I will divide the post into 4 sections - Scene file, Transformations, a section summarizing other features like lighting and texture mapping and final section on rendering.</p>

<h2 id="scene-file">Scene File</h2>
<p>We use a custom scene file format to describe all the components in a scene - objects, camera, lights, texture maps etc. The file format is as below:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>View section: keyword view
eye &lt;vec3&gt;
center &lt;vec3&gt;
viewup &lt;vec3&gt;
Lights section: keyword light
type [local|spot|directional]
ambient &lt;vec3&gt;
color &lt;vec3&gt;
position &lt;vec3&gt;
constAtt &lt;float&gt;
linearAtt &lt;float&gt;
quadAtt &lt;float&gt;
coneDirection &lt;vec3&gt;
spotCosCutoff &lt;vec3&gt;
spotExponent &lt;vec3&gt;
Objects section:
object &lt;filename of Wavefront OBJ file&gt;
shader [Blinn_Phong|Toon]
[
rx &lt;angle (degrees)&gt; ry &lt;angle (degrees)&gt; rz &lt;angle (degrees)&gt;
t &lt;vec3&gt;
s &lt;vec3&gt;
]
</code></pre>
</div>

<p>The view section describes the eye (camera position), center (the vector representing the focus of the camera) and viewup (vector representing vertical direction).  These are needed for transformation of the objects and will affect how they are viewed. The lights section describe one or more lights, their positions and properties which fit into the lighting models. The objects section should include one more objects with path to .obj files, associated shader followed by the set of transformations (Rotation/Translation/Scale) for each object.</p>

<p>In terms of code, this involves writing a parser to read all these sections which translates into the below abstraction:</p>
<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Object</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
	<span class="n">string</span> <span class="n">path</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">;</span>
	<span class="n">vec3</span> <span class="n">t</span><span class="p">;</span>
	<span class="n">string</span> <span class="n">shader</span><span class="p">;</span>
	<span class="n">mat4</span> <span class="n">modelingMatrix</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">class</span> <span class="nc">Scene</span>
<span class="p">{</span>
	<span class="k">public</span><span class="o">:</span>
		
		<span class="n">lightProperties</span> <span class="n">lightVals</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="c1">//upto 4 light sources supported
</span>		
		<span class="n">vec3</span> <span class="n">eye</span><span class="p">;</span>
		<span class="n">vec3</span> <span class="n">center</span><span class="p">;</span>
		<span class="n">vec3</span> <span class="n">viewUp</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">numLightSources</span><span class="p">;</span>
		<span class="n">vector</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">objects</span><span class="p">;</span>
		<span class="n">Scene</span><span class="p">();</span>

<span class="p">};</span>

<span class="k">class</span> <span class="nc">SceneParser</span>
<span class="p">{</span>
	<span class="k">public</span><span class="o">:</span>
		<span class="n">Scene</span> <span class="n">parseSceneFile</span><span class="p">(</span><span class="n">string</span> <span class="n">fileName</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
</div>

<h2 id="transformations">Transformations</h2>
<p>Each object exists in its unique coordinate space. So they have to be <em>transformed</em> to the camera’s coordinate space (<strong>Viewing transformation</strong>). The object might also have transformation with respect to its own coordinate space (<strong>Modeling transformation</strong>). And the final transformation involves transformation from the camera space to fit the camera’s frustum volume(<strong>Projection</strong>).  The viewport transformation is performed under-the-hood by the OpenGL to fit the objects within the screen space. These transformations can be visually illustrated with the below figure (courtesy of the OpenGL Redbook)</p>

<p><img src="http://res.cloudinary.com/dqagjb1nc/image/upload/v1497597941/Capture_gymr6m.png" alt="Transformations" /></p>

<p>Much of the transformations is performed using <strong>GLM</strong> which offers a powerful interface for storing coordinates and transforming them. The key transformation methods in OpenGL are <code class="highlighter-rouge">frustum()</code> for perspective projection, <code class="highlighter-rouge">ortho()</code> for orthogonal projection, <code class="highlighter-rouge">lookAt()</code> for viewing transformation and <code class="highlighter-rouge">rotate()</code>,<code class="highlighter-rouge">scale()</code> and <code class="highlighter-rouge">translate()</code> for the modeling transformations. The <a href="https://glm.g-truc.net/0.9.2/api/a00245.html">GLM docs</a> provide more context.</p>

<h2 id="lighting-shading-texture-mappingetc">Lighting, Shading, Texture Mapping…etc.</h2>
<p>This part involves key features of OpenGL from version 3.1 onwards when the <a href="https://www.khronos.org/opengl/wiki/Fixed_Function_Pipeline">Fixed Function Pipeline</a> was deprecated and the concept of <strong>shaders</strong> took importance. A shader is piece of C++ -like code but compiled, linked and runs completely on the GPU.  The language is called GLSL (GL Shading Language). Data is typically passed to shaders from CPU code using read-only variables called <strong>uniform</strong> variables. There are many types of shaders but two of them are mandatory - Vertex Shader (transformations on vertices to form primitives) and Fragment Shader (assigning color for fragments formed by primitives). There are other optional intermediate shaders like Geometry Shader and Tesellation shader which we do not discuss in this post. Below image (courtesy <a href="http://www.ntu.edu.sg/home/ehchua/programming/opengl/cg_basicstheory.html">this</a>) illustrates the basic shader pipeline.</p>

<p><img src="http://www.ntu.edu.sg/home/ehchua/programming/opengl/images/Graphics3D_Pipe.png" alt="OpenGL pipeline" /></p>

<p>In our accomodate, we perform the transformations (using the matrices) per vertex in the vertex shader and apply the lighting model in the fragment shader. A simple vertex shader looks something like this:</p>
<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="c1">// Vertex shader for multiple lights stays the same with all lighting
// done in the fragment shader.
</span>
<span class="cp">#version 410 core
</span>
<span class="n">uniform</span> <span class="n">mat4</span> <span class="n">MVPMatrix</span><span class="p">;</span>	<span class="c1">// full model-view-projection matrix
</span><span class="n">uniform</span> <span class="n">mat4</span> <span class="n">MVMatrix</span><span class="p">;</span>	<span class="c1">// model and view matrix
</span><span class="n">uniform</span> <span class="n">mat3</span> <span class="n">NormalMatrix</span><span class="p">;</span>	<span class="c1">// transformation matrix for normals to eye coordinates
</span>
<span class="n">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">in</span> <span class="n">vec3</span> <span class="n">VertexPosition</span><span class="p">;</span> <span class="c1">// Vertex Buffer Object pointing to the object positions
</span><span class="n">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="n">in</span> <span class="n">vec3</span> <span class="n">VertexNormal</span><span class="p">;</span>  <span class="c1">//Vertex Buffer Object pointing to normals at each position
</span><span class="n">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="n">in</span> <span class="n">vec2</span> <span class="n">texIndex</span><span class="p">;</span> <span class="c1">//Vertex Buffer Object with texture map indices for each position
</span>
<span class="n">out</span> <span class="n">vec3</span> <span class="n">Normal</span><span class="p">;</span>	<span class="c1">// vertex normal in eye coordinates
</span><span class="n">out</span> <span class="n">vec4</span> <span class="n">Position</span><span class="p">;</span>	<span class="c1">// vertex position in eye coordinates
</span><span class="n">out</span> <span class="n">vec2</span> <span class="n">textCoord</span><span class="p">;</span> <span class="c1">//pass texture map indices to frag shader
</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">textCoord</span> <span class="o">=</span><span class="n">vec2</span><span class="p">(</span><span class="n">texIndex</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">-</span><span class="n">texIndex</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
    <span class="n">Normal</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">NormalMatrix</span> <span class="o">*</span> <span class="n">VertexNormal</span><span class="p">);</span>
    <span class="n">Position</span> <span class="o">=</span> <span class="n">MVMatrix</span> <span class="o">*</span> <span class="n">vec4</span><span class="p">(</span><span class="n">VertexPosition</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">);</span>
    <span class="n">gl_Position</span> <span class="o">=</span> <span class="n">MVPMatrix</span> <span class="o">*</span> <span class="n">vec4</span><span class="p">(</span><span class="n">VertexPosition</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>
<p>All shaders should have a <code class="highlighter-rouge">void main()</code> method. The transformation matrices are passed as uniform variables. The normal matrix is required for transforming normals at each object position to camera space and then utilized in the lighting model.</p>

<p>We implement two sets of shaders for two different lighting models - Blinn Phong model and Toon shader. The Blinn-Phong model is based on the below equation:</p>

<p><code class="MathJax_Preview">Intensity (I) = I_{ambient}*K_{ambient}</code><script type="math/tex">Intensity (I) = I_{ambient}*K_{ambient}</script> + <code class="MathJax_Preview">I_{directional}*K_{directional}*(N.L_p)</code><script type="math/tex">I_{directional}*K_{directional}*(N.L_p)</script> + <code class="MathJax_Preview">I_{specular}*K_{specular}*(N.L_p)^n</code><script type="math/tex">I_{specular}*K_{specular}*(N.L_p)^n</script></p>

<p>3 different components of each light source are incorporated and the <code class="MathJax_Preview">K</code><script type="math/tex">K</script> values are the surface coefficients for each component and are defined in a <strong>.mtl</strong>(material) file. <code class="MathJax_Preview">N</code><script type="math/tex">N</script> denotes the normal vector and <code class="MathJax_Preview">L_p</code><script type="math/tex">L_p</script> denotes the light position. The specular component indicates the highlights created by reflection and <code class="MathJax_Preview">n</code><script type="math/tex">n</script> denotes how sharp these highlights are.</p>

<p>The Toon shader creates cartoonish shades to the surface. This is done by discretizing color values based on light intensity values. The code for it (Fragment shader) is fairly straightforward</p>
<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="c1">// Toon Fragment shader for multiple lights.
</span>
<span class="cp">#version 410 core
</span>
<span class="n">in</span> <span class="n">vec2</span> <span class="n">textCoord</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">LightProperties</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">isEnabled</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">isLocal</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">isSpot</span><span class="p">;</span>
    <span class="n">vec3</span> <span class="n">ambient</span><span class="p">;</span>
    <span class="n">vec3</span> <span class="n">color</span><span class="p">;</span>
    <span class="n">vec3</span> <span class="n">position</span><span class="p">;</span>
    <span class="n">vec3</span> <span class="n">halfVector</span><span class="p">;</span>
    <span class="n">vec3</span> <span class="n">coneDirection</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">spotCosCutoff</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">spotExponent</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">constantAttenuation</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">linearAttenuation</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">quadraticAttenuation</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// the set of lights to apply, per invocation of this shader
</span><span class="k">const</span> <span class="kt">int</span> <span class="n">MAXLIGHTS</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">uniform</span> <span class="n">LightProperties</span> <span class="n">Lights</span><span class="p">[</span><span class="n">MAXLIGHTS</span><span class="p">];</span>

<span class="c1">// material description
</span><span class="n">uniform</span> <span class="n">vec3</span> <span class="n">ambient</span><span class="p">;</span>	
<span class="n">uniform</span> <span class="n">vec3</span> <span class="n">diffuse</span><span class="p">;</span>
<span class="n">uniform</span> <span class="n">vec3</span> <span class="n">specular</span><span class="p">;</span>
<span class="n">uniform</span> <span class="kt">float</span> <span class="n">shininess</span><span class="p">;</span>
<span class="n">uniform</span> <span class="kt">bool</span> <span class="n">textureEnabled</span><span class="p">;</span>

<span class="n">uniform</span> <span class="n">sampler2D</span> <span class="n">textVar</span><span class="p">;</span> <span class="c1">// for texture mapping
</span>
<span class="n">in</span> <span class="n">vec3</span> <span class="n">Normal</span><span class="p">;</span>		<span class="c1">// normal in eye coordinates
</span><span class="n">in</span> <span class="n">vec4</span> <span class="n">Position</span><span class="p">;</span>	<span class="c1">// vertex position in eye coordinates
</span>
<span class="n">out</span> <span class="n">vec4</span> <span class="n">FragColor</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">vec3</span> <span class="n">scatteredLight</span> <span class="o">=</span> <span class="n">vec3</span><span class="p">(</span><span class="mf">0.</span><span class="n">f</span><span class="p">);</span>
	<span class="n">vec3</span> <span class="n">reflectedLight</span> <span class="o">=</span> <span class="n">vec3</span><span class="p">(</span><span class="mf">0.</span><span class="n">f</span><span class="p">);</span>
	<span class="n">vec3</span> <span class="n">eyeDirection</span><span class="p">;</span>
	<span class="n">vec3</span> <span class="n">lightDirection</span><span class="p">;</span>
	<span class="n">vec3</span> <span class="n">halfVector</span><span class="p">;</span>
	<span class="n">vec3</span> <span class="n">myNormal</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">attenuation</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">diffuseIntensity</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">specularCoeff</span><span class="p">;</span>

    <span class="c1">// loop over all the lights
</span>     

        <span class="n">attenuation</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

        <span class="n">eyeDirection</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="o">-</span><span class="n">vec3</span><span class="p">(</span><span class="n">Position</span><span class="p">));</span>	<span class="c1">// since we are in eye coordinates
</span>													<span class="c1">// eye position is 0,0,0
</span>        <span class="c1">// for local lights, compute per-fragment direction,
</span>        <span class="c1">// halfVector, and attenuation
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">Lights</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">isLocal</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> 
		   <span class="p">{</span>
		        <span class="n">lightDirection</span> <span class="o">=</span> <span class="n">Lights</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">position</span> <span class="o">-</span> <span class="n">vec3</span><span class="p">(</span><span class="n">Position</span><span class="p">);</span>
            <span class="kt">float</span> <span class="n">lightDistance</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">lightDirection</span><span class="p">);</span>
            <span class="n">lightDirection</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">lightDirection</span><span class="p">);</span>

			
			    	<span class="k">if</span> <span class="p">(</span><span class="n">Lights</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">isSpot</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> 
				    <span class="p">{</span>
				         	<span class="n">vec3</span> <span class="n">myConeDirection</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">Lights</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">coneDirection</span><span class="p">);</span>
					        <span class="kt">float</span> <span class="n">spotCos</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">lightDirection</span><span class="p">,</span><span class="o">-</span><span class="n">myConeDirection</span><span class="p">);</span>
					
				    <span class="p">}</span>
            <span class="n">halfVector</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">lightDirection</span> <span class="o">+</span> <span class="n">eyeDirection</span><span class="p">);</span>
        <span class="p">}</span> 
		   <span class="k">else</span>
		   <span class="c1">// directional light
</span>		   <span class="p">{</span>
		      	<span class="n">lightDirection</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">Lights</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">position</span><span class="p">);</span>
		      	<span class="n">halfVector</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">lightDirection</span> <span class="o">+</span> <span class="n">eyeDirection</span><span class="p">);</span>
        <span class="p">}</span>

		   <span class="n">myNormal</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">Normal</span><span class="p">);</span>

       <span class="n">diffuseIntensity</span>  <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dot</span><span class="p">(</span><span class="n">myNormal</span><span class="p">,</span> <span class="n">lightDirection</span><span class="p">));</span>
       
		<span class="k">if</span><span class="p">(</span><span class="n">diffuseIntensity</span> <span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">diffuseIntensity</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">)</span>
			<span class="n">diffuseIntensity</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">diffuseIntensity</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">7.0</span> <span class="o">&amp;&amp;</span> <span class="n">diffuseIntensity</span> <span class="o">&lt;</span> <span class="mf">2.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">)</span>
			<span class="n">diffuseIntensity</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">diffuseIntensity</span> <span class="o">&gt;=</span> <span class="mf">2.0</span><span class="o">/</span><span class="mf">7.0</span> <span class="o">&amp;&amp;</span> <span class="n">diffuseIntensity</span> <span class="o">&lt;</span> <span class="mf">3.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">)</span>
			<span class="n">diffuseIntensity</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">diffuseIntensity</span> <span class="o">&gt;=</span> <span class="mf">3.0</span><span class="o">/</span><span class="mf">7.0</span> <span class="o">&amp;&amp;</span> <span class="n">diffuseIntensity</span> <span class="o">&lt;</span> <span class="mf">4.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">)</span>
			<span class="n">diffuseIntensity</span> <span class="o">=</span> <span class="mf">3.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">diffuseIntensity</span> <span class="o">&gt;=</span> <span class="mf">4.0</span><span class="o">/</span><span class="mf">7.0</span> <span class="o">&amp;&amp;</span> <span class="n">diffuseIntensity</span> <span class="o">&lt;</span> <span class="mf">5.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">)</span>
			<span class="n">diffuseIntensity</span> <span class="o">=</span> <span class="mf">4.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">diffuseIntensity</span> <span class="o">&gt;=</span> <span class="mf">5.0</span><span class="o">/</span><span class="mf">7.0</span> <span class="o">&amp;&amp;</span> <span class="n">diffuseIntensity</span> <span class="o">&lt;</span> <span class="mf">6.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">)</span>
			<span class="n">diffuseIntensity</span> <span class="o">=</span> <span class="mf">5.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">diffuseIntensity</span> <span class="o">&gt;=</span> <span class="mf">6.0</span><span class="o">/</span><span class="mf">7.0</span> <span class="o">&amp;&amp;</span> <span class="n">diffuseIntensity</span> <span class="o">&lt;</span> <span class="mf">7.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">)</span>
			<span class="n">diffuseIntensity</span> <span class="o">=</span> <span class="mf">6.0</span><span class="o">/</span><span class="mf">7.0</span><span class="p">;</span>
		
		<span class="c1">// Accumulate all the lights’ effects as it interacts with material properties
</span>
		<span class="n">scatteredLight</span> <span class="o">+=</span> <span class="n">Lights</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">color</span> <span class="o">*</span> <span class="n">ambient</span>  <span class="o">+</span> <span class="n">Lights</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">color</span> <span class="o">*</span> <span class="p">(</span><span class="n">diffuseIntensity</span><span class="o">*</span> <span class="n">diffuse</span><span class="p">)</span> <span class="p">;</span>  <span class="c1">//only 1st light used
</span>
	<span class="n">vec3</span> <span class="n">rgb</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">scatteredLight</span><span class="p">,</span> <span class="n">vec3</span><span class="p">(</span><span class="mf">1.0</span><span class="p">));</span>
	<span class="n">FragColor</span> <span class="o">=</span> <span class="n">vec4</span><span class="p">(</span><span class="n">rgb</span><span class="p">,</span><span class="mf">1.0</span><span class="n">f</span><span class="p">);</span> <span class="c1">//final color
</span><span class="p">}</span>
</code></pre>
</div>
<p>And finally texture mapping is implemented by loading static images and using the texture <em>samplers</em> in the fragment shader to sample the color at <code class="MathJax_Preview">(u,v)</code><script type="math/tex">(u,v)</script>. In terms of code, we would have something like below using <em>SOIL</em>:</p>

<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">channels</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span> <span class="n">image</span> <span class="o">=</span> 	<span class="n">SOIL_load_image</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">width</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">height</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">channels</span><span class="p">,</span> <span class="n">SOIL_LOAD_AUTO</span><span class="p">);</span>
<span class="n">glEnable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">bump</span><span class="p">)</span> <span class="c1">//if bump map
</span>	<span class="n">glActiveTexture</span><span class="p">(</span><span class="n">GL_TEXTURE0</span> <span class="o">+</span> <span class="n">obj</span><span class="p">.</span><span class="n">bumpMapTexID</span><span class="p">);</span>
<span class="k">else</span>
	<span class="n">glActiveTexture</span><span class="p">(</span><span class="n">GL_TEXTURE0</span> <span class="o">+</span> <span class="n">obj</span><span class="p">.</span><span class="n">diffuseTexMapID</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">text</span><span class="p">;</span> <span class="c1">//texture ID
</span><span class="n">glGetIntegerv</span><span class="p">(</span><span class="n">GL_ACTIVE_TEXTURE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>
<span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texture</span><span class="p">);</span>
<span class="n">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_WRAP_S</span><span class="p">,</span> <span class="n">GL_REPEAT</span><span class="p">);</span>  <span class="c1">//wrap around object
</span><span class="n">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_WRAP_T</span><span class="p">,</span> <span class="n">GL_REPEAT</span><span class="p">);</span>
<span class="n">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_MAG_FILTER</span><span class="p">,</span> <span class="n">GL_LINEAR</span><span class="p">);</span> <span class="c1">//linear interpolation for zooming
</span><span class="n">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_MIN_FILTER</span><span class="p">,</span> <span class="n">GL_LINEAR</span><span class="p">);</span>
	
<span class="c1">// store in framebuffer
</span><span class="k">if</span> <span class="p">(</span><span class="n">channels</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
	<span class="n">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGB</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGB</span><span class="p">,</span><span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">image</span><span class="p">);</span>
<span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">channels</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGBA</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGBA</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">image</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">SOIL_free_image_data</span><span class="p">(</span><span class="n">image</span><span class="p">);</span>
</code></pre>
</div>

<p>As we’ve seen in the fragment, a <code class="MathJax_Preview">sampler2D</code><script type="math/tex">sampler2D</script> type is used for sampling color using <code class="MathJax_Preview">(u,v)</code><script type="math/tex">(u,v)</script> indices.</p>

<p>Apart from that, to support viewing around the scene using keyboard controls(W,A,S,D,X,Y), we set GLFW keyboard callbacks by using the methods below:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>glfwSetKeyCallback(window, key_callback);
glfwSetWindowSizeCallback(window, resize);
</code></pre>
</div>

<h2 id="rendering">Rendering</h2>
<p>Each object has two aspects in the code - a <strong>Vertex Array Object (VAO)</strong> and three <strong>Vertex Buffer Objects (VBO)</strong>. A VAO is a handle or pointer to the VBOs. VBOs can store vertex data (position,normal,color,texture indices). We use 3 VBOs per object to store position, normals and texture map indices. Data is buffered to GPU using VBOs and VBOs are indexed in the shaders using <code class="MathJax_Preview">location</code><script type="math/tex">location</script> variable to dereference buffers. Drawing a object involves a sequence of calls <em>selecting</em> the shader,<em>binding</em> the vertex array object,<em>binding</em> the VBOs and then invoking a call to <code class="highlighter-rouge">glDrawArrays</code>.</p>
<div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="n">glUseProgram</span><span class="p">(</span><span class="n">currentShader</span><span class="p">);</span>
<span class="p">....</span>
<span class="p">...</span>
<span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">VAO</span><span class="p">);</span>
<span class="p">...</span>
<span class="p">...</span>
<span class="n">glDrawArrays</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">info</span><span class="p">.</span><span class="n">VAOsize</span><span class="p">);</span> <span class="c1">//draw as triangles
</span></code></pre>
</div>

<h2 id="a-few-scenes">A Few Scenes</h2>

<p><img src="https://res.cloudinary.com/dqagjb1nc/image/upload/v1497605271/Capture_omtcjz.png" alt="Spot light" /></p>

<p><img src="https://res.cloudinary.com/dqagjb1nc/image/upload/v1497605675/Capture_rracnd.png" alt="Directional lights" /></p>


</article>


  <hr class="dingbat" />





  <aside class="author" role="complementary">
    <div class="author">
  
    
  

  

  <img
    src="/assets/img/profile.jpg"
    class="me"
    alt="Sridhar Mocherla"
    srcset="/assets/img/profile.jpg 1x,/assets/img/profile.jpg 2x"
    
  />


  

  <h2 class="page-title hr">
    About
  </h2>

  <p>Computer Science student, Software Engineer.</p>


  
    <div class="sidebar-social">
      <span class="sr-only">Social:</span>
<ul>
  
    













<li>
  <a href="https://twitter.com/SridharMocherla" title="Twitter">
    <span class="icon-twitter"></span>
    <span class="sr-only">Twitter</span>
  </a>
</li>

  
    













<li>
  <a href="https://github.com/srmocher" title="GitHub">
    <span class="icon-github"></span>
    <span class="sr-only">GitHub</span>
  </a>
</li>

  
    













<li>
  <a href="http://stackoverflow.com/users/4031150/sridhar" title="Stack Overflow">
    <span class="icon-stackoverflow"></span>
    <span class="sr-only">Stack Overflow</span>
  </a>
</li>

  
    













<li>
  <a href="mailto:sridhar.mocherla@outlook.com" title="Email">
    <span class="icon-mail"></span>
    <span class="sr-only">Email</span>
  </a>
</li>

  

  

  
</ul>

    </div>
  
</div>

  </aside>






  <h2>Other Projects</h2>
  <div class="grid">
    
    
      <div class="col col-1-2">
        

<div class="card">
  <a href="/projects/3d-scalar-fields/" class="no-hover" data-flip="project">
    <div class="img sixteen-nine">
      
        
  

  

  <img
    src="https://i.imgur.com/JYMSews.gif"
    
    alt="Thumbnail"
    srcset="https://i.imgur.com/JYMSews.gif 1920w,https://i.imgur.com/JYMSews.gif 960w,https://i.imgur.com/JYMSews.gif 480w"
    sizes="(min-width: 92em) 22.5rem, (min-width: 60em) 19.5rem, (min-width: 54em) 32rem, (min-width: 40em) 17.25rem, 100vw"
  />


      
    </div>
  </a>
  <h3 class="name">
    <a href="/projects/3d-scalar-fields/" data-flip="title">3D Scalar Fields</a>
  </h3>
  
    <div class="caption"><p>Isosurface construction and visualization using Marching Cubes</p>
</div>
  
</div>

      </div>
    

    
    
      <div class="col col-1-2">
        

<div class="card">
  <a href="/projects/a-2-d-transfer-function-editor/" class="no-hover" data-flip="project">
    <div class="img sixteen-nine">
      
        
  

  

  <img
    src="//imageshack.com/a/img922/8650/b4I1bG.gif"
    
    alt="Thumbnail"
    srcset="//imageshack.com/a/img922/8650/b4I1bG.gif 1920w,//imageshack.com/a/img922/8650/b4I1bG.gif 960w,//imageshack.com/a/img922/8650/b4I1bG.gif 480w"
    sizes="(min-width: 92em) 22.5rem, (min-width: 60em) 19.5rem, (min-width: 54em) 32rem, (min-width: 40em) 17.25rem, 100vw"
  />


      
    </div>
  </a>
  <h3 class="name">
    <a href="/projects/a-2-d-transfer-function-editor/" data-flip="title">A 2-D Transfer Function editor</a>
  </h3>
  
    <div class="caption"><p>A 2-D Transfer function editor taking the scalar value and gradient magnitude as dimensions</p>
</div>
  
</div>

      </div>
    
  </div>



      

      <footer>
  <hr/>
  
    <p>© Sridhar 2017. All rights reserved.</p>

  
  <p>
    <code>Powered by <a href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">6.5.0</span></code>
  </p>
</footer>

    </main>
  </div>
  <div id="_yDrawer">
  <div id="_sidebar" class="sidebar">
    <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url(/assets/img/rain.jpg)"></div>
    <header class="sidebar-sticky" role="banner">
      <div class="sidebar-about">
        <h1><a id="_title" href="/">Sridhar</a></h1>
        <p>Computer Science student, Software Engineer.</p>

      </div>

      <nav class="sidebar-nav heading" role="navigation">
        <span class="sr-only">Navigation:</span>
<ul>
  

  

  

  
    <li>
      <a class="sidebar-nav-item" href="/projects/">Projects</a>
    </li>
  
    <li>
      <a class="sidebar-nav-item" href="/resume/">Resume</a>
    </li>
  
    <li>
      <a class="sidebar-nav-item" href="/about/">About</a>
    </li>
  
</ul>

      </nav>

      

      
        <div class="sidebar-social">
          <span class="sr-only">Social:</span>
<ul>
  
    













<li>
  <a href="https://twitter.com/SridharMocherla" title="Twitter">
    <span class="icon-twitter"></span>
    <span class="sr-only">Twitter</span>
  </a>
</li>

  
    













<li>
  <a href="https://github.com/srmocher" title="GitHub">
    <span class="icon-github"></span>
    <span class="sr-only">GitHub</span>
  </a>
</li>

  
    













<li>
  <a href="http://stackoverflow.com/users/4031150/sridhar" title="Stack Overflow">
    <span class="icon-stackoverflow"></span>
    <span class="sr-only">Stack Overflow</span>
  </a>
</li>

  
    













<li>
  <a href="mailto:sridhar.mocherla@outlook.com" title="Email">
    <span class="icon-mail"></span>
    <span class="sr-only">Email</span>
  </a>
</li>

  

  

  
</ul>

        </div>
      
    </header>
  </div>
</div>

</div>



<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-103697816-1', 'auto');
  ga('send', 'pageview');
  loadJSDeferred('https://www.google-analytics.com/analytics.js');
</script>



  <!--[if gt IE 9]><!---->
  
  <script>loadJSDeferred('/assets/js/hydejack.js?v=6.5.0');</script>

  

  <!--<![endif]-->



</body>

</html>
